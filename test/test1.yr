extern (C) malloc (a : int) : ptr!int;
extern (C) free (a : ptr!int) : void;

def string (size : int, p : ptr!char) {
    let c = cast:ptr!(char) (malloc (size + 9));
    c.int = 0;
    (c + 4).int = size;
    let i = 8;
    while (*p != 0) {
	*(c + i) = *p;
	p = p+1;
    }
    *(c + i) = '\0';
    return c;
}


def main () {
    let a = 'r';

}
